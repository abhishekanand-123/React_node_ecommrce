{"ast":null,"code":"// import React from \"react\";\n// import { useLocation } from \"react-router-dom\";\n// import \"./ThankYou.css\"; // <-- New CSS file\n\n// function ThankYou() {\n//   const location = useLocation();\n//   const totalAmount = location.state?.totalAmount || 0;\n\n//   return (\n//     <div className=\"thankyou-wrapper\">\n//       <div className=\"thankyou-box\">\n//         <h1>üéâ Thank You!</h1>\n//         <p>Your order has been placed successfully.</p>\n\n//         <div className=\"order-info\">\n//           <span>Total Paid:</span>\n//           <strong>‚Çπ{totalAmount}</strong>\n//         </div>\n\n//         <button\n//           className=\"back-home-btn\"\n//           onClick={() => (window.location.href = \"/\")}\n//         >\n//           Continue Shopping\n//         </button>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default ThankYou;\n\napp.get(\"/transaction-details/:transaction_id\", (req, res) => {\n  const {\n    transaction_id\n  } = req.params;\n\n  // 1Ô∏è‚É£ Fetch transaction\n  db.query(\"SELECT * FROM transactions WHERE transaction_id = ? LIMIT 1\", [transaction_id], (err, transactionResult) => {\n    if (err) return res.status(500).json({\n      error: err.message\n    });\n    if (transactionResult.length === 0) return res.status(404).json({\n      message: \"Transaction not found\"\n    });\n    const transaction = transactionResult[0];\n\n    // 2Ô∏è‚É£ Fetch ordered products\n    db.query(`\n        SELECT \n          oi.product_id,\n          oi.quantity,\n          p.title,\n          p.price\n        FROM order_items oi\n        JOIN products p ON p.id = oi.product_id\n        WHERE oi.order_id = ?\n        `, [transaction.transaction_id], (err2, products) => {\n      if (err2) return res.status(500).json({\n        error: err2.message\n      });\n\n      // 3Ô∏è‚É£ Send ALL data\n      res.json({\n        transaction,\n        products\n      });\n    });\n  });\n});","map":{"version":3,"names":["app","get","req","res","transaction_id","params","db","query","err","transactionResult","status","json","error","message","length","transaction","err2","products"],"sources":["C:/Users/ASD/Desktop/react_project/my-app/src/pages/ThankYou.js"],"sourcesContent":["// import React from \"react\";\r\n// import { useLocation } from \"react-router-dom\";\r\n// import \"./ThankYou.css\"; // <-- New CSS file\r\n\r\n// function ThankYou() {\r\n//   const location = useLocation();\r\n//   const totalAmount = location.state?.totalAmount || 0;\r\n\r\n//   return (\r\n//     <div className=\"thankyou-wrapper\">\r\n//       <div className=\"thankyou-box\">\r\n//         <h1>üéâ Thank You!</h1>\r\n//         <p>Your order has been placed successfully.</p>\r\n\r\n//         <div className=\"order-info\">\r\n//           <span>Total Paid:</span>\r\n//           <strong>‚Çπ{totalAmount}</strong>\r\n//         </div>\r\n\r\n//         <button\r\n//           className=\"back-home-btn\"\r\n//           onClick={() => (window.location.href = \"/\")}\r\n//         >\r\n//           Continue Shopping\r\n//         </button>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default ThankYou;\r\n\r\napp.get(\"/transaction-details/:transaction_id\", (req, res) => {\r\n  const { transaction_id } = req.params;\r\n\r\n  // 1Ô∏è‚É£ Fetch transaction\r\n  db.query(\r\n    \"SELECT * FROM transactions WHERE transaction_id = ? LIMIT 1\",\r\n    [transaction_id],\r\n    (err, transactionResult) => {\r\n      if (err) return res.status(500).json({ error: err.message });\r\n      if (transactionResult.length === 0)\r\n        return res.status(404).json({ message: \"Transaction not found\" });\r\n\r\n      const transaction = transactionResult[0];\r\n\r\n      // 2Ô∏è‚É£ Fetch ordered products\r\n      db.query(\r\n        `\r\n        SELECT \r\n          oi.product_id,\r\n          oi.quantity,\r\n          p.title,\r\n          p.price\r\n        FROM order_items oi\r\n        JOIN products p ON p.id = oi.product_id\r\n        WHERE oi.order_id = ?\r\n        `,\r\n        [transaction.transaction_id],\r\n        (err2, products) => {\r\n          if (err2) return res.status(500).json({ error: err2.message });\r\n\r\n          // 3Ô∏è‚É£ Send ALL data\r\n          res.json({\r\n            transaction,\r\n            products,\r\n          });\r\n        }\r\n      );\r\n    }\r\n  );\r\n});\r\n\r\n"],"mappings":"AAAA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEAA,GAAG,CAACC,GAAG,CAAC,sCAAsC,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EAC5D,MAAM;IAAEC;EAAe,CAAC,GAAGF,GAAG,CAACG,MAAM;;EAErC;EACAC,EAAE,CAACC,KAAK,CACN,6DAA6D,EAC7D,CAACH,cAAc,CAAC,EAChB,CAACI,GAAG,EAAEC,iBAAiB,KAAK;IAC1B,IAAID,GAAG,EAAE,OAAOL,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAEJ,GAAG,CAACK;IAAQ,CAAC,CAAC;IAC5D,IAAIJ,iBAAiB,CAACK,MAAM,KAAK,CAAC,EAChC,OAAOX,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEE,OAAO,EAAE;IAAwB,CAAC,CAAC;IAEnE,MAAME,WAAW,GAAGN,iBAAiB,CAAC,CAAC,CAAC;;IAExC;IACAH,EAAE,CAACC,KAAK,CACN;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,EACD,CAACQ,WAAW,CAACX,cAAc,CAAC,EAC5B,CAACY,IAAI,EAAEC,QAAQ,KAAK;MAClB,IAAID,IAAI,EAAE,OAAOb,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAEI,IAAI,CAACH;MAAQ,CAAC,CAAC;;MAE9D;MACAV,GAAG,CAACQ,IAAI,CAAC;QACPI,WAAW;QACXE;MACF,CAAC,CAAC;IACJ,CACF,CAAC;EACH,CACF,CAAC;AACH,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}